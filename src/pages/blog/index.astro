---
import Layout from '../../layouts/Layout.astro';
import { format } from 'date-fns';

const posts = await Astro.glob('./*.{md,mdx}');
const sortedPosts = posts.sort((a, b) => 
  new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf()
);
---

<Layout title="Blog" description="Blog description" slug="https://media.licdn.com/dms/image/C4E12AQGEy0nHsryvOg/article-cover_image-shrink_720_1280/0/1561242730098?e=2147483647&v=beta&t=Zvez_D5lTF6HeyMW9_KSObThHV1sRQY62sQo-QXyuRk">
  <main>
    <h1>Blog Posts</h1>
    <ul class="post-list">
      {sortedPosts.map(post => (
        <li>
          <a href={post.url}>
            <h2>{post.frontmatter.title}</h2>
            <div class="metadata">
              <time datetime={post.frontmatter.date}>
                {format(new Date(post.frontmatter.date), 'MMMM d, yyyy')}
              </time>
              {post.frontmatter.author && 
                <span> â€¢ By {post.frontmatter.author}</span>
              }
            </div>
            {post.frontmatter.description && 
              <p>{post.frontmatter.description}</p>
            }
          </a>
        </li>
      ))}
    </ul>
  </main>
</Layout>

<style>
  main {
    max-width: 80ch;
    margin: 0 auto;
    padding: 2rem;
  }

  h1 {
    font-size: 2.5rem;
    margin-bottom: 2rem;
    color: white;
  }

  .post-list {
    list-style: none;
    padding: 0;
  }

  .post-list li {
    margin-bottom: 2rem;
  }

  .post-list a {
    display: block;
    text-decoration: none;
    color: inherit;
    padding: 1rem;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.05);
    transition: background 0.2s;
  }

  .post-list a:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  h2 {
    margin: 0;
    color: white;
    font-size: 1.5rem;
  }

  .metadata {
    color: #94a3b8;
    margin: 0.5rem 0;
    font-size: 0.9rem;
  }

  p {
    margin: 0.5rem 0 0;
    color: #cbd5e1;
  }
</style>